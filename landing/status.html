<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Status - StyleMCP</title>
  <meta name="description" content="StyleMCP API status and uptime monitoring.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#0a0a0b;--bg-elevated:#141416;--bg-card:#1a1a1e;--border:#2a2a2e;--text:#fafafa;--text-muted:#a1a1aa;--accent:#6366f1;--accent-hover:#818cf8;--green:#22c55e;--red:#ef4444;--yellow:#eab308}
    body{font-family:'Inter',-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased;min-height:100vh}

    nav{position:fixed;top:0;left:0;right:0;background:rgba(10,10,11,0.8);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);z-index:100}
    nav .container{display:flex;align-items:center;justify-content:space-between;height:64px;max-width:1200px;margin:0 auto;padding:0 24px}
    .logo{font-weight:700;font-size:1.25rem;color:var(--text);text-decoration:none;display:flex;align-items:center;gap:8px}
    .logo-icon{width:32px;height:32px;background:linear-gradient(135deg,var(--accent) 0%,#a855f7 100%);border-radius:8px;display:flex;align-items:center;justify-content:center}
    .nav-links{display:flex;align-items:center;gap:32px}
    .nav-links a{color:var(--text-muted);text-decoration:none;font-size:0.9rem;font-weight:500;transition:color 0.2s}
    .nav-links a:hover{color:var(--text)}

    .container{max-width:800px;margin:0 auto;padding:0 24px}

    .hero{padding:120px 0 60px;text-align:center}
    h1{font-size:2.5rem;font-weight:700;margin-bottom:16px}
    .hero p{color:var(--text-muted);font-size:1.1rem}

    .status-card{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:32px;margin-bottom:24px}
    .status-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
    .status-title{font-size:1.25rem;font-weight:600}
    .status-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;border-radius:50px;font-weight:500;font-size:0.9rem}
    .status-badge.operational{background:rgba(34,197,94,0.15);color:var(--green);border:1px solid rgba(34,197,94,0.3)}
    .status-badge.degraded{background:rgba(234,179,8,0.15);color:var(--yellow);border:1px solid rgba(234,179,8,0.3)}
    .status-badge.down{background:rgba(239,68,68,0.15);color:var(--red);border:1px solid rgba(239,68,68,0.3)}
    .status-badge.checking{background:rgba(99,102,241,0.15);color:var(--accent);border:1px solid rgba(99,102,241,0.3)}
    .status-dot{width:8px;height:8px;border-radius:50%;background:currentColor}

    .endpoints{display:flex;flex-direction:column;gap:12px}
    .endpoint{display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--bg-elevated);border-radius:8px}
    .endpoint-info{display:flex;align-items:center;gap:12px}
    .endpoint-name{font-weight:500}
    .endpoint-url{color:var(--text-muted);font-family:'JetBrains Mono',monospace;font-size:0.85rem}
    .endpoint-status{display:flex;align-items:center;gap:8px;font-size:0.9rem}
    .endpoint-status.ok{color:var(--green)}
    .endpoint-status.error{color:var(--red)}
    .endpoint-status.checking{color:var(--text-muted)}
    .latency{color:var(--text-muted);font-size:0.85rem}

    .info-section{margin-top:48px}
    .info-section h2{font-size:1.5rem;font-weight:600;margin-bottom:16px}
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
    .info-item{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px}
    .info-label{color:var(--text-muted);font-size:0.85rem;margin-bottom:4px}
    .info-value{font-size:1.25rem;font-weight:600}
    .info-value.mono{font-family:'JetBrains Mono',monospace;font-size:1rem}

    footer{padding:60px 0;border-top:1px solid var(--border);margin-top:80px}
    .footer-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:24px;max-width:1200px;margin:0 auto;padding:0 24px}
    .footer-links{display:flex;gap:32px}
    .footer-links a{color:var(--text-muted);text-decoration:none;font-size:0.9rem;transition:color 0.2s}
    .footer-links a:hover{color:var(--text)}
    .footer-copy{color:var(--text-muted);font-size:0.9rem}

    @media(max-width:640px){
      .status-header{flex-direction:column;align-items:flex-start;gap:16px}
      .endpoint{flex-direction:column;align-items:flex-start;gap:12px}
      .nav-links{display:none}
    }
  </style>
</head>
<body>
  <nav>
    <div class="container" style="max-width:1200px">
      <a href="/" class="logo">
        <div class="logo-icon">S</div>
        StyleMCP
      </a>
      <div class="nav-links">
        <a href="/#features">Features</a>
        <a href="/docs.html">Docs</a>
        <a href="/pricing.html">Pricing</a>
        <a href="https://github.com/3DUNLMTD/stylemcp" target="_blank">GitHub</a>
      </div>
    </div>
  </nav>

  <section class="hero">
    <div class="container">
      <h1>System Status</h1>
      <p>Real-time status of StyleMCP services</p>
    </div>
  </section>

  <div class="container">
    <div class="status-card">
      <div class="status-header">
        <span class="status-title">API Status</span>
        <span id="overall-status" class="status-badge checking">
          <span class="status-dot"></span>
          Checking...
        </span>
      </div>

      <div class="endpoints">
        <div class="endpoint">
          <div class="endpoint-info">
            <div>
              <div class="endpoint-name">Health Check</div>
              <div class="endpoint-url">/health</div>
            </div>
          </div>
          <div id="health-status" class="endpoint-status checking">
            <span>Checking...</span>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-info">
            <div>
              <div class="endpoint-name">Validation API</div>
              <div class="endpoint-url">/api/validate</div>
            </div>
          </div>
          <div id="validate-status" class="endpoint-status checking">
            <span>Checking...</span>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-info">
            <div>
              <div class="endpoint-name">Style Packs</div>
              <div class="endpoint-url">/api/packs</div>
            </div>
          </div>
          <div id="packs-status" class="endpoint-status checking">
            <span>Checking...</span>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-info">
            <div>
              <div class="endpoint-name">MCP Server</div>
              <div class="endpoint-url">/api/mcp/sse</div>
            </div>
          </div>
          <div id="mcp-status" class="endpoint-status checking">
            <span>Checking...</span>
          </div>
        </div>
      </div>
    </div>

    <div class="info-section">
      <h2>System Information</h2>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Version</div>
          <div id="version" class="info-value mono">—</div>
        </div>
        <div class="info-item">
          <div class="info-label">Last Checked</div>
          <div id="last-check" class="info-value mono">—</div>
        </div>
        <div class="info-item">
          <div class="info-label">Response Time</div>
          <div id="response-time" class="info-value mono">—</div>
        </div>
        <div class="info-item">
          <div class="info-label">Available Packs</div>
          <div id="packs-count" class="info-value">—</div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="https://github.com/3DUNLMTD/stylemcp">GitHub</a>
        <a href="/docs.html">Documentation</a>
        <a href="/pricing.html">Pricing</a>
      </div>
      <div class="footer-copy">
        &copy; 2025 StyleMCP. Open source under MIT license.
      </div>
    </div>
  </footer>

  <script>
    const API_BASE = window.location.origin;

    async function checkEndpoint(url, statusEl, method = 'GET', body = null) {
      const start = performance.now();
      try {
        const options = { method };
        if (body) {
          options.headers = { 'Content-Type': 'application/json' };
          options.body = JSON.stringify(body);
        }
        const res = await fetch(API_BASE + url, options);
        const latency = Math.round(performance.now() - start);
        
        if (res.ok) {
          statusEl.className = 'endpoint-status ok';
          statusEl.innerHTML = `<span>Operational</span><span class="latency">${latency}ms</span>`;
          return { ok: true, latency, data: await res.json().catch(() => null) };
        } else {
          statusEl.className = 'endpoint-status error';
          statusEl.innerHTML = `<span>Error ${res.status}</span>`;
          return { ok: false };
        }
      } catch (e) {
        statusEl.className = 'endpoint-status error';
        statusEl.innerHTML = `<span>Unreachable</span>`;
        return { ok: false };
      }
    }

    async function runChecks() {
      const results = [];

      // Health check
      const health = await checkEndpoint('/health', document.getElementById('health-status'));
      results.push(health.ok);
      if (health.data?.version) {
        document.getElementById('version').textContent = 'v' + health.data.version;
      }
      if (health.latency) {
        document.getElementById('response-time').textContent = health.latency + 'ms';
      }

      // Validate API
      const validate = await checkEndpoint(
        '/api/validate',
        document.getElementById('validate-status'),
        'POST',
        { text: 'Test validation' }
      );
      results.push(validate.ok);

      // Packs
      const packs = await checkEndpoint('/api/packs', document.getElementById('packs-status'));
      results.push(packs.ok);
      if (packs.data?.packs) {
        document.getElementById('packs-count').textContent = packs.data.packs.length;
      }

      // MCP (just check if endpoint responds)
      const mcp = await checkEndpoint('/api/mcp/sse', document.getElementById('mcp-status'));
      results.push(mcp.ok);

      // Overall status
      const overall = document.getElementById('overall-status');
      const allOk = results.every(r => r);
      const someOk = results.some(r => r);

      if (allOk) {
        overall.className = 'status-badge operational';
        overall.innerHTML = '<span class="status-dot"></span>All Systems Operational';
      } else if (someOk) {
        overall.className = 'status-badge degraded';
        overall.innerHTML = '<span class="status-dot"></span>Partial Outage';
      } else {
        overall.className = 'status-badge down';
        overall.innerHTML = '<span class="status-dot"></span>Service Disruption';
      }

      // Last check time
      document.getElementById('last-check').textContent = new Date().toLocaleTimeString();
    }

    // Run on load
    runChecks();

    // Refresh every 30 seconds
    setInterval(runChecks, 30000);
  </script>
</body>
</html>
